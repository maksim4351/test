<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Google Tag Manager -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-5XCPZKJJ');</script>
    <!-- End Google Tag Manager -->
    
    <!-- Yandex.Metrika counter -->
    <script type="text/javascript" >
       (function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
       m[i].l=1*new Date();
       for (var j = 0; j < document.scripts.length; j++) {if (document.scripts[j].src === r) { return; }}
       k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})
       (window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");

       ym(103117485, "init", {
            clickmap:true,
            trackLinks:true,
            accurateTrackBounce:true
       });
    </script>
    <noscript><div><img src="https://mc.yandex.ru/watch/103117485" style="position:absolute; left:-9999px;" alt="" /></div></noscript>
    <!-- /Yandex.Metrika counter -->
    
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- SEO Meta Tags -->
    <title>Dead Pixel Test - Free Online Monitor Pixel Detection Tool</title>
    <meta name="description" content="Free online dead pixel test tool. Detect stuck, dead, or hot pixels on your monitor. Professional pixel testing with systematic screen scanning.">
    <meta name="keywords" content="dead pixel test, stuck pixel test, hot pixel test, monitor pixel detection, screen pixel test, display pixel check, dead pixel finder, monitor test online, pixel defect test, screen diagnostics">
    <meta name="author" content="Monitor Test Tool">
    <meta name="robots" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://maksim4351.github.io/test/dead_pixel_test.html">
    <meta property="og:title" content="Dead Pixel Test - Free Online Monitor Pixel Detection Tool">
    <meta property="og:description" content="Free online dead pixel test tool. Detect stuck, dead, or hot pixels on your monitor. Professional pixel testing with systematic screen scanning.">
    <meta property="og:image" content="https://maksim4351.github.io/test/monitor-test-preview.jpg">
    <meta property="og:locale" content="en_US">
    <meta property="og:site_name" content="Monitor Test Tool">
    
    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://maksim4351.github.io/test/dead_pixel_test.html">
    <meta property="twitter:title" content="Dead Pixel Test - Free Online Monitor Pixel Detection Tool">
    <meta property="twitter:description" content="Free online dead pixel test tool. Detect stuck, dead, or hot pixels on your monitor. Professional pixel testing with systematic screen scanning.">
    <meta property="twitter:image" content="https://maksim4351.github.io/test/monitor-test-preview.jpg">
    
    <!-- Favicon -->
    <link rel="icon" type="image/png" href="favicon.png">
    <link rel="apple-touch-icon" sizes="180x180" href="favicon.png">
    <link rel="shortcut icon" type="image/png" href="favicon.png">
    
    <!-- Canonical URL -->
    <link rel="canonical" href="https://maksim4351.github.io/test/dead_pixel_test.html">
    
    <!-- Multi-language support -->
    <link rel="alternate" hreflang="en" href="https://maksim4351.github.io/test/dead_pixel_test.html">
    <link rel="alternate" hreflang="ru" href="https://maksim4351.github.io/test/dead_pixel_test.html?lang=ru">
    <link rel="alternate" hreflang="es" href="https://maksim4351.github.io/test/dead_pixel_test.html?lang=es">
    <link rel="alternate" hreflang="fr" href="https://maksim4351.github.io/test/dead_pixel_test.html?lang=fr">
    <link rel="alternate" hreflang="de" href="https://maksim4351.github.io/test/dead_pixel_test.html?lang=de">
    <link rel="alternate" hreflang="it" href="https://maksim4351.github.io/test/dead_pixel_test.html?lang=it">
    <link rel="alternate" hreflang="pt" href="https://maksim4351.github.io/test/dead_pixel_test.html?lang=pt">
    <link rel="alternate" hreflang="ja" href="https://maksim4351.github.io/test/dead_pixel_test.html?lang=ja">
    <link rel="alternate" hreflang="ko" href="https://maksim4351.github.io/test/dead_pixel_test.html?lang=ko">
    <link rel="alternate" hreflang="zh" href="https://maksim4351.github.io/test/dead_pixel_test.html?lang=zh">
    <link rel="alternate" hreflang="ar" href="https://maksim4351.github.io/test/dead_pixel_test.html?lang=ar">
    <link rel="alternate" hreflang="hi" href="https://maksim4351.github.io/test/dead_pixel_test.html?lang=hi">
    <link rel="alternate" hreflang="tr" href="https://maksim4351.github.io/test/dead_pixel_test.html?lang=tr">
    <link rel="alternate" hreflang="nl" href="https://maksim4351.github.io/test/dead_pixel_test.html?lang=nl">
    <link rel="alternate" hreflang="pl" href="https://maksim4351.github.io/test/dead_pixel_test.html?lang=pl">
    <link rel="alternate" hreflang="sv" href="https://maksim4351.github.io/test/dead_pixel_test.html?lang=sv">
    <link rel="alternate" hreflang="fi" href="https://maksim4351.github.io/test/dead_pixel_test.html?lang=fi">
    <link rel="alternate" hreflang="no" href="https://maksim4351.github.io/test/dead_pixel_test.html?lang=no">
    <link rel="alternate" hreflang="da" href="https://maksim4351.github.io/test/dead_pixel_test.html?lang=da">
    <link rel="alternate" hreflang="cs" href="https://maksim4351.github.io/test/dead_pixel_test.html?lang=cs">
    <link rel="alternate" hreflang="hu" href="https://maksim4351.github.io/test/dead_pixel_test.html?lang=hu">
    <link rel="alternate" hreflang="ro" href="https://maksim4351.github.io/test/dead_pixel_test.html?lang=ro">
    <link rel="alternate" hreflang="bg" href="https://maksim4351.github.io/test/dead_pixel_test.html?lang=bg">
    <link rel="alternate" hreflang="hr" href="https://maksim4351.github.io/test/dead_pixel_test.html?lang=hr">
    <link rel="alternate" hreflang="sk" href="https://maksim4351.github.io/test/dead_pixel_test.html?lang=sk">
    <link rel="alternate" hreflang="sl" href="https://maksim4351.github.io/test/dead_pixel_test.html?lang=sl">
    <link rel="alternate" hreflang="et" href="https://maksim4351.github.io/test/dead_pixel_test.html?lang=et">
    <link rel="alternate" hreflang="lv" href="https://maksim4351.github.io/test/dead_pixel_test.html?lang=lv">
    <link rel="alternate" hreflang="lt" href="https://maksim4351.github.io/test/dead_pixel_test.html?lang=lt">
    <link rel="alternate" hreflang="el" href="https://maksim4351.github.io/test/dead_pixel_test.html?lang=el">
    <link rel="alternate" hreflang="he" href="https://maksim4351.github.io/test/dead_pixel_test.html?lang=he">
    <link rel="alternate" hreflang="th" href="https://maksim4351.github.io/test/dead_pixel_test.html?lang=th">
    <link rel="alternate" hreflang="vi" href="https://maksim4351.github.io/test/dead_pixel_test.html?lang=vi">
    <link rel="alternate" hreflang="id" href="https://maksim4351.github.io/test/dead_pixel_test.html?lang=id">
    <link rel="alternate" hreflang="ms" href="https://maksim4351.github.io/test/dead_pixel_test.html?lang=ms">
    <link rel="alternate" hreflang="fil" href="https://maksim4351.github.io/test/dead_pixel_test.html?lang=fil">
    <link rel="alternate" hreflang="uk" href="https://maksim4351.github.io/test/dead_pixel_test.html?lang=uk">
    <link rel="alternate" hreflang="be" href="https://maksim4351.github.io/test/dead_pixel_test.html?lang=be">
    <link rel="alternate" hreflang="kk" href="https://maksim4351.github.io/test/dead_pixel_test.html?lang=kk">
    <link rel="alternate" hreflang="uz" href="https://maksim4351.github.io/test/dead_pixel_test.html?lang=uz">
    <link rel="alternate" hreflang="ky" href="https://maksim4351.github.io/test/dead_pixel_test.html?lang=ky">
    <link rel="alternate" hreflang="tg" href="https://maksim4351.github.io/test/dead_pixel_test.html?lang=tg">
    <link rel="alternate" hreflang="mn" href="https://maksim4351.github.io/test/dead_pixel_test.html?lang=mn">
    <link rel="alternate" hreflang="ka" href="https://maksim4351.github.io/test/dead_pixel_test.html?lang=ka">
    <link rel="alternate" hreflang="hy" href="https://maksim4351.github.io/test/dead_pixel_test.html?lang=hy">
    <link rel="alternate" hreflang="az" href="https://maksim4351.github.io/test/dead_pixel_test.html?lang=az">
    <link rel="alternate" hreflang="eu" href="https://maksim4351.github.io/test/dead_pixel_test.html?lang=eu">
    <link rel="alternate" hreflang="gl" href="https://maksim4351.github.io/test/dead_pixel_test.html?lang=gl">
    <link rel="alternate" hreflang="ca" href="https://maksim4351.github.io/test/dead_pixel_test.html?lang=ca">
    <link rel="alternate" hreflang="is" href="https://maksim4351.github.io/test/dead_pixel_test.html?lang=is">
    <link rel="alternate" hreflang="mt" href="https://maksim4351.github.io/test/dead_pixel_test.html?lang=mt">
    <link rel="alternate" hreflang="cy" href="https://maksim4351.github.io/test/dead_pixel_test.html?lang=cy">
    <link rel="alternate" hreflang="ga" href="https://maksim4351.github.io/test/dead_pixel_test.html?lang=ga">
    <link rel="alternate" hreflang="sq" href="https://maksim4351.github.io/test/dead_pixel_test.html?lang=sq">
    <link rel="alternate" hreflang="mk" href="https://maksim4351.github.io/test/dead_pixel_test.html?lang=mk">
    <link rel="alternate" hreflang="sr" href="https://maksim4351.github.io/test/dead_pixel_test.html?lang=sr">
    <link rel="alternate" hreflang="bs" href="https://maksim4351.github.io/test/dead_pixel_test.html?lang=bs">
    <link rel="alternate" hreflang="me" href="https://maksim4351.github.io/test/dead_pixel_test.html?lang=me">
    <link rel="alternate" hreflang="x-default" href="https://maksim4351.github.io/test/dead_pixel_test.html">
    
    <link rel="stylesheet" href="style.css?v=1.1">
    
    <!-- Structured Data -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebPage",
        "name": "Dead Pixel Test - Free Online Monitor Pixel Detection Tool",
        "description": "Free online dead pixel test tool. Detect stuck, dead, or hot pixels on your monitor. Professional pixel testing with systematic screen scanning.",
        "url": "https://maksim4351.github.io/test/dead_pixel_test.html",
        "inLanguage": "en-US",
        "publisher": {
            "@type": "Organization",
            "name": "Monitor Test Tool"
        },
        "image": "https://maksim4351.github.io/test/monitor-test-preview.jpg",
        "mainEntity": {
            "@type": "SoftwareApplication",
            "name": "Dead Pixel Test Tool",
            "applicationCategory": "UtilityApplication",
            "operatingSystem": "Web Browser",
            "description": "Professional tool for detecting dead, stuck, and hot pixels on monitors",
            "offers": {
                "@type": "Offer",
                "price": "0",
                "priceCurrency": "USD"
            }
        },
        "breadcrumb": {
            "@type": "BreadcrumbList",
            "itemListElement": [
                {
                    "@type": "ListItem",
                    "position": 1,
                    "name": "Home",
                    "item": "https://maksim4351.github.io/test/dashboard.html"
                },
                {
                    "@type": "ListItem",
                    "position": 2,
                    "name": "Dead Pixel Test",
                    "item": "https://maksim4351.github.io/test/dead_pixel_test.html"
                }
            ]
        }
    }
    </script>
</head>
<body>
    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5XCPZKJJ"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->
    
    <div class="test-container">
        <h1 id="deadPixelTitle">Dead Pixel Test</h1>
        <p id="deadPixelDescription" style="text-align:center; max-width:600px; margin:0 auto 20px;">
            Check your monitor for dead, stuck, or hot pixels.
        </p>
        <div class="test-info">
            <h2 id="deadPixelHowTo">How to use:</h2>
            <ul id="deadPixelHowToList">
                <li>Click <b>Start Test</b> to begin. Use arrow keys or click to change the background color.</li>
                <li>Carefully look for pixels that differ from the background. Click on a defective pixel to mark it.</li>
                <li>For dynamic testing, click <b>Dynamic Line</b>:
                    <ul>
                        <li>Adjust the line color, background, thickness, speed, and movement mode.</li>
                        <li>Enable auto color for automatic line color change.</li>
                        <li>You can drag the Dynamic Line menu by any free area to check pixels underneath.</li>
                    </ul>
                </li>
                <li>Click <b>Back to Dashboard</b> to return to the main menu.</li>
            </ul>
        </div>
        <div class="controls">
            <button id="startBtn" class="btn">Start Test</button>
            <button id="startLineBtn" class="btn">Dynamic Line</button>
            <button id="stopLineBtn" class="btn" style="display:none;">Stop Line</button>
            <button id="resetMarkersBtn">Reset Markers</button>
            <a id="backToDashboard" href="index.html" class="btn">Back to Dashboard</a>
        </div>
        
        <div id="test-area" class="test-area" style="display: none;"></div>
        <div id="dynamicLineArea" style="display:none; position:fixed; left:0; top:0; width:100vw; height:100vh; z-index:1000; background:#000;">
            <canvas id="dynamicLineCanvas" style="display:block; width:100vw; height:100vh;"></canvas>
        </div>
        <div id="dynamicLineControls">
            <div>
                <label for="lineColorSelect">Line Color:</label>
                <select id="lineColorSelect">
                    <option value="#fff">White</option>
                    <option value="#f00">Red</option>
                    <option value="#0f0">Green</option>
                    <option value="#00f">Blue</option>
                    <option value="#ff0">Yellow</option>
                    <option value="#0ff">Cyan</option>
                    <option value="#f0f">Magenta</option>
                    <option value="#000">Black</option>
                </select>
            </div>
            <div>
                <label for="bgColorSelect">Background:</label>
                <select id="bgColorSelect">
                    <option value="#000">Black</option>
                    <option value="#fff">White</option>
                    <option value="#888">Gray</option>
                    <option value="#f00">Red</option>
                    <option value="#0f0">Green</option>
                    <option value="#00f">Blue</option>
                </select>
            </div>
            <div>
                <label for="lineWidthRange">Line Width:</label>
                <input type="range" id="lineWidthRange" min="1" max="20" value="3">
                <span id="lineWidthValue">3</span> px
            </div>
            <div>
                <label for="lineSpeedRange">Speed:</label>
                <input type="range" id="lineSpeedRange" min="1" max="40" value="6">
                <span id="lineSpeedValue">6</span> px/frame
            </div>
            <div>
                <label for="moveModeSelect">Move Mode:</label>
                <select id="moveModeSelect">
                    <option value="horizontal">Horizontal</option>
                    <option value="vertical">Vertical</option>
                    <option value="diagonal">Diagonal</option>
                </select>
            </div>
            <div>
                <label for="autoColorSwitch">Auto Color:</label>
                <input type="checkbox" id="autoColorSwitch">
            </div>
            <button id="closeDynamicLineBtn">Close</button>
        </div>
    </div>

    <!-- Language Switcher -->
    <div style="display:none; position: fixed; top: 20px; right: 20px; z-index: 1000; background: rgba(0,0,0,0.9); padding: 12px; border-radius: 10px; border: 1px solid #555;">
        <label for="languageSelect" style="color: white; font-size: 12px; display: block; margin-bottom: 5px;">ğŸŒ Language:</label>
        <select id="languageSelect" style="background: #333; color: white; border: 1px solid #555; padding: 8px; border-radius: 6px; font-size: 14px; min-width: 120px;">
            <option value="en">ğŸ‡ºğŸ‡¸ English</option>
            <option value="ru">ğŸ‡·ğŸ‡º Ğ ÑƒÑÑĞºĞ¸Ğ¹</option>
            <option value="es">ğŸ‡ªğŸ‡¸ EspaÃ±ol</option>
            <option value="de">ğŸ‡©ğŸ‡ª Deutsch</option>
            <option value="fr">ğŸ‡«ğŸ‡· FranÃ§ais</option>
            <option value="it">ğŸ‡®ğŸ‡¹ Italiano</option>
            <option value="pt">ğŸ‡µğŸ‡¹ PortuguÃªs</option>
            <option value="zh">ğŸ‡¨ğŸ‡³ ä¸­æ–‡</option>
            <option value="ja">ğŸ‡¯ğŸ‡µ æ—¥æœ¬èª</option>
            <option value="ko">ğŸ‡°ğŸ‡· í•œêµ­ì–´</option>
            <option value="tr">ğŸ‡¹ğŸ‡· TÃ¼rkÃ§e</option>
            <option value="ar">ğŸ‡¸ğŸ‡¦ Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</option>
            <option value="hi">ğŸ‡®ğŸ‡³ à¤¹à¤¿à¤¨à¥à¤¦à¥€</option>
            <option value="nl">ğŸ‡³ğŸ‡± Nederlands</option>
            <option value="pl">ğŸ‡µğŸ‡± Polski</option>
            <option value="sv">ğŸ‡¸ğŸ‡ª Svenska</option>
            <option value="fi">ğŸ‡«ğŸ‡® Suomi</option>
            <option value="no">ğŸ‡³ğŸ‡´ Norsk</option>
            <option value="uk">ğŸ‡ºğŸ‡¦ Ğ£ĞºÑ€Ğ°Ñ—Ğ½ÑÑŒĞºĞ°</option>
            <option value="cs">ğŸ‡¨ğŸ‡¿ ÄŒeÅ¡tina</option>
        </select>
    </div>
    <!-- Auto-translation notification -->
    <div id="autoTranslationNotice" style="display:none; position: fixed; top: 80px; right: 20px; z-index: 999; background: rgba(76, 175, 80, 0.9); color: white; padding: 12px; border-radius: 8px; font-size: 14px; max-width: 250px; border: 1px solid #4CAF50;">
        <div style="font-weight: bold; margin-bottom: 5px;">ğŸŒ Auto-translated</div>
        <div style="font-size: 12px;">Site automatically translated to your language</div>
        <button onclick="this.parentElement.style.display='none'" style="position: absolute; top: 5px; right: 5px; background: none; border: none; color: white; font-size: 16px; cursor: pointer;">Ã—</button>
    </div>
    <script>
    document.addEventListener('DOMContentLoaded', function() {
        const testArea = document.getElementById('test-area');
        const startBtn = document.getElementById('startBtn');
        const resetMarkersBtn = document.getElementById('resetMarkersBtn');
        const colors = [
            {name: 'White', value: '#ffffff'},
            {name: 'Black', value: '#000000'},
            {name: 'Red', value: '#ff0000'},
            {name: 'Green', value: '#00ff00'},
            {name: 'Blue', value: '#0000ff'},
            {name: 'Cyan', value: '#00ffff'},
            {name: 'Magenta', value: '#ff00ff'},
            {name: 'Yellow', value: '#ffff00'}
        ];
        let currentIndex = 0;
        let markers = [];
        function setColor(index) {
            testArea.style.background = colors[index].value;
            testArea.setAttribute('data-color', colors[index].name);
        }
        function showTestArea() {
            testArea.style.display = 'block';
            testArea.classList.add('fullscreen');
            setColor(currentIndex);
            resetMarkersBtn.style.display = 'inline-block';
            document.body.style.overflow = 'hidden';
            if (testArea.requestFullscreen) testArea.requestFullscreen();
        }
        function hideTestArea() {
            testArea.style.display = 'none';
            testArea.classList.remove('fullscreen');
            resetMarkersBtn.style.display = 'none';
            document.body.style.overflow = '';
            removeAllMarkers();
            if (document.fullscreenElement) document.exitFullscreen();
        }
        function nextColor() {
            currentIndex = (currentIndex + 1) % colors.length;
            setColor(currentIndex);
        }
        function prevColor() {
            currentIndex = (currentIndex - 1 + colors.length) % colors.length;
            setColor(currentIndex);
        }
        function addMarker(x, y) {
            const marker = document.createElement('div');
            marker.className = 'pixel-marker';
            marker.style.left = x + 'px';
            marker.style.top = y + 'px';
            testArea.appendChild(marker);
            markers.push(marker);
        }
        function removeAllMarkers() {
            markers.forEach(m => m.remove());
            markers = [];
        }
        startBtn.addEventListener('click', function() {
            showTestArea();
        });
        resetMarkersBtn.addEventListener('click', function() {
            removeAllMarkers();
        });
        testArea.addEventListener('click', function(e) {
            // Don't place marker if clicking reset button
            if (e.target === resetMarkersBtn) return;
            addMarker(e.clientX, e.clientY);
        });
        document.addEventListener('keydown', function(e) {
            if (testArea.style.display === 'block') {
                if (e.key === 'ArrowRight') nextColor();
                else if (e.key === 'ArrowLeft') prevColor();
                else if (e.key === 'Escape') hideTestArea();
                else if (e.key === ' ') nextColor();
            }
        });
        // Exit fullscreen mode - hide test
        document.addEventListener('fullscreenchange', function() {
            if (!document.fullscreenElement && testArea.style.display === 'block') {
                hideTestArea();
            }
        });
        

        // === Dynamic Line ===
        const startLineBtn = document.getElementById('startLineBtn');
        const stopLineBtn = document.getElementById('stopLineBtn');
        const dynamicLineArea = document.getElementById('dynamicLineArea');
        const dynamicLineCanvas = document.getElementById('dynamicLineCanvas');
        const dynamicLineControls = document.getElementById('dynamicLineControls');
        const lineColorSelect = document.getElementById('lineColorSelect');
        const bgColorSelect = document.getElementById('bgColorSelect');
        const lineWidthRange = document.getElementById('lineWidthRange');
        const lineWidthValue = document.getElementById('lineWidthValue');
        const moveModeSelect = document.getElementById('moveModeSelect');
        const autoColorSwitch = document.getElementById('autoColorSwitch');
        const closeDynamicLineBtn = document.getElementById('closeDynamicLineBtn');
        const lineSpeedRange = document.getElementById('lineSpeedRange');
        const lineSpeedValue = document.getElementById('lineSpeedValue');
        let lineAnimationId = null;
        let linePos = 0;
        let lineSpeed = parseInt(lineSpeedRange.value);
        let moveMode = 'horizontal';
        let autoColor = false;
        let autoColorTimer = null;
        let currentLineColor = lineColorSelect.value;
        let currentBgColor = bgColorSelect.value;
        let currentLineWidth = parseInt(lineWidthRange.value);
        function resizeCanvas() {
            dynamicLineCanvas.width = window.innerWidth;
            dynamicLineCanvas.height = window.innerHeight;
        }
        function drawMovingLine() {
            const ctx = dynamicLineCanvas.getContext('2d');
            ctx.clearRect(0, 0, dynamicLineCanvas.width, dynamicLineCanvas.height);
            ctx.fillStyle = currentBgColor;
            ctx.fillRect(0, 0, dynamicLineCanvas.width, dynamicLineCanvas.height);
            ctx.strokeStyle = currentLineColor;
            ctx.lineWidth = currentLineWidth;
            ctx.beginPath();
            if (moveMode === 'horizontal') {
                ctx.moveTo(0, linePos);
                ctx.lineTo(dynamicLineCanvas.width, linePos);
            } else if (moveMode === 'vertical') {
                ctx.moveTo(linePos, 0);
                ctx.lineTo(linePos, dynamicLineCanvas.height);
            } else if (moveMode === 'diagonal') {
                ctx.moveTo(0, linePos);
                ctx.lineTo(linePos, 0);
            }
            ctx.stroke();
            linePos += lineSpeed;
            if (moveMode === 'horizontal' && linePos > dynamicLineCanvas.height) linePos = 0;
            if (moveMode === 'vertical' && linePos > dynamicLineCanvas.width) linePos = 0;
            if (moveMode === 'diagonal' && linePos > Math.max(dynamicLineCanvas.width, dynamicLineCanvas.height)) linePos = 0;
            lineAnimationId = requestAnimationFrame(drawMovingLine);
        }
        function startDynamicLine() {
            resizeCanvas();
            linePos = 0;
            dynamicLineArea.style.display = 'block';
            dynamicLineControls.style.display = 'block';
            if (startLineBtn) startLineBtn.style.display = 'none';
            if (stopLineBtn) stopLineBtn.style.display = 'inline-block';
            drawMovingLine();
            if (autoColorSwitch.checked) startAutoColor();
        }
        function stopDynamicLine() {
            if (lineAnimationId) cancelAnimationFrame(lineAnimationId);
            dynamicLineArea.style.display = 'none';
            dynamicLineControls.style.display = 'none';
            if (startLineBtn) startLineBtn.style.display = 'inline-block';
            if (stopLineBtn) stopLineBtn.style.display = 'none';
            stopAutoColor();
        }
        function startAutoColor() {
            stopAutoColor();
            autoColorTimer = setInterval(() => {
                const options = Array.from(lineColorSelect.options);
                let idx = options.findIndex(opt => opt.value === currentLineColor);
                idx = (idx + 1) % options.length;
                currentLineColor = options[idx].value;
                lineColorSelect.value = currentLineColor;
            }, 1200);
        }
        function stopAutoColor() {
            if (autoColorTimer) clearInterval(autoColorTimer);
            autoColorTimer = null;
        }
        lineColorSelect.addEventListener('change', function() {
            currentLineColor = this.value;
        });
        bgColorSelect.addEventListener('change', function() {
            currentBgColor = this.value;
        });
        lineWidthRange.addEventListener('input', function() {
            currentLineWidth = parseInt(this.value);
            lineWidthValue.textContent = this.value;
        });
        moveModeSelect.addEventListener('change', function() {
            moveMode = this.value;
        });
        autoColorSwitch.addEventListener('change', function() {
            autoColor = this.checked;
            if (autoColor) startAutoColor();
            else stopAutoColor();
        });
        lineSpeedRange.addEventListener('input', function() {
            lineSpeed = parseInt(this.value);
            lineSpeedValue.textContent = this.value;
        });
        closeDynamicLineBtn.addEventListener('click', stopDynamicLine);
        if (startLineBtn) startLineBtn.addEventListener('click', startDynamicLine);
        if (stopLineBtn) stopLineBtn.addEventListener('click', stopDynamicLine);
        window.addEventListener('resize', resizeCanvas);
        if (dynamicLineArea) dynamicLineArea.addEventListener('click', stopDynamicLine);
        document.addEventListener('keydown', (event) => {
            if (dynamicLineArea && dynamicLineArea.style.display === 'block' && event.key === 'Escape') {
                stopDynamicLine();
            }
        });
        // === Menu dragging with mouse ===
        let dragMenu = false, dragOffsetX = 0, dragOffsetY = 0;
        dynamicLineControls.addEventListener('mousedown', function(e) {
            if (e.target.tagName === 'SELECT' || e.target.tagName === 'INPUT' || e.target.tagName === 'BUTTON') return;
            dragMenu = true;
            dragOffsetX = e.clientX - dynamicLineControls.getBoundingClientRect().left;
            dragOffsetY = e.clientY - dynamicLineControls.getBoundingClientRect().top;
            document.body.style.userSelect = 'none';
        });
        document.addEventListener('mousemove', function(e) {
            if (!dragMenu) return;
            dynamicLineControls.style.left = (e.clientX - dragOffsetX) + 'px';
            dynamicLineControls.style.top = (e.clientY - dragOffsetY) + 'px';
            dynamicLineControls.style.right = 'auto';
            dynamicLineControls.style.bottom = 'auto';
        });
        document.addEventListener('mouseup', function() {
            dragMenu = false;
            document.body.style.userSelect = '';
        });
    });
    </script>
</body>
<style>
    body { margin: 0; overflow: hidden; }
    .test-container { z-index: 10; }
    .pixel-marker {
        position: absolute;
        width: 18px;
        height: 18px;
        background: rgba(255,0,0,0.7);
        border-radius: 50%;
        border: 2px solid #fff;
        pointer-events: none;
        transform: translate(-50%, -50%);
        z-index: 1001;
    }
    #test-area.fullscreen {
        position: fixed;
        left: 0; top: 0; width: 100vw; height: 100vh;
        z-index: 1000;
        cursor: crosshair;
    }
    #resetMarkersBtn {
        position: fixed;
        top: 24px;
        left: 24px;
        z-index: 1100;
        background: #222;
        color: #fff;
        border: 1px solid #fff;
        border-radius: 8px;
        padding: 8px 18px;
        font-size: 16px;
        cursor: pointer;
        display: none;
    }
    #dynamicLineControls {
        position: fixed;
        top: 32px;
        right: 32px;
        z-index: 2000;
        background: rgba(0,0,0,0.85);
        color: #fff;
        border-radius: 12px;
        padding: 18px 22px 12px 22px;
        box-shadow: 0 4px 24px #0005;
        display: none;
    }
    #dynamicLineControls label {
        font-size: 15px;
        margin-right: 8px;
    }
    #dynamicLineControls select, #dynamicLineControls input[type=range] {
        margin-bottom: 10px;
    }
    #dynamicLineControls button {
        margin-top: 8px;
        margin-right: 8px;
        background: #222;
        color: #fff;
        border: 1px solid #fff;
        border-radius: 6px;
        padding: 6px 14px;
        font-size: 15px;
        cursor: pointer;
    }
</style>
</html> 